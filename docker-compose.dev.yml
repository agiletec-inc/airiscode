services:
  workspace:
    build:
      context: .
      dockerfile: Dockerfile.dev
      args:
        PNPM_VERSION: "10.21.0"
    working_dir: /app
    command: sleep infinity
    environment:
      - DOCKER_CONTAINER=true
      - NODE_ENV=development
      - PNPM_STORE_DIR=/home/app/.local/share/pnpm/store/v3
      - WATCHPACK_POLLING=true
    volumes:
      - .:/app:delegated
      - pnpm_store:/home/app/.local/share/pnpm/store/v3
    extra_hosts:
      - "host.docker.internal:host-gateway"
    stdin_open: true
    tty: true

volumes:
  pnpm_store:
